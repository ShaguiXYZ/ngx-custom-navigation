<article class="component-container">
  <quote-header-title>
    <span nxQuoteLiteral="header"></span>
  </quote-header-title>
  <section class="form-container">
    <form [formGroup]="form">
      <nx-formfield [label]="'e-mail' | quoteLiteral">
        <input type="email" formControlName="email" nxInput />
        @if(form.get('email')?.errors?.['required']) {
        <nx-error appearance="text" nxFormfieldError><span nxQuoteLiteral="error-required"></span> </nx-error>
        } @if(form.get('email')?.errors?.['matches']) {
        <nx-error appearance="text" nxFormfieldError><span nxQuoteLiteral="bad-format"></span> </nx-error>
        }
      </nx-formfield>
      <quote-zone>
        <div class="products-info nx-margin-top-s">
          <div class="products-info-literal nx-margin-right-xs" nxCopytext="normal">
            <span nxQuoteLiteral="more-info"></span>
          </div>
          <nx-switcher formControlName="accepInfo" />
        </div>
      </quote-zone>
      <quote-zone>
        <div class="products-info nx-margin-top-s">
          <div class="privatity products-info-literal nx-margin-right-xs" nxCopytext="normal">
            <span
              nxQuoteLiteral="privacy-policy-text"
              [nxQuoteLitealParams]="{
                'private-policy-a': {
                  value: 'privacy-policy-tag',
                  params: {
                    link: { value: 'privacy-policy-link', type: 'literal' },
                    'link-text': { value: 'privacy-policy-link-text', type: 'literal' }
                  },
                  type: 'literal'
                }
              }"
            ></span>
          </div>
          <nx-switcher formControlName="acceptPrivacyPolicy" />
        </div>
        @if(form.get('acceptPrivacyPolicy')?.touched && form.get('acceptPrivacyPolicy')?.errors?.['requiredTrue']) {
        <nx-error class="align-right" appearance="text" nxFormfieldError><span nxQuoteLiteral="error-required"></span></nx-error>
        }
        <div class="legal-text nx-margin-top-s" nxCopytext="normal" nxQuoteLiteral="legal-text">
          <span class="products-info-literal nx-margin-y-s"></span>
        </div>
      </quote-zone>
    </form>
  </section>
  <quote-footer
    [trackInfo]="{
      title: 'header' | quoteLiteral,
      email: form.get('email')?.value,
    }"
    (uiOnNext)="updateValidData()"
  />
</article>
